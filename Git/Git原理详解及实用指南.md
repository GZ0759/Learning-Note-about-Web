> Git原理详解及实用指南 掘金小册
> 扔物线 Android 开发者

# 1 什么是版本控制系统（VCS）

## 版本控制：最基本功能

版本控制系统（VCS）最基本的功能是版本控制。所谓版本控制，意思就是在文件的修改历程中保留修改历史，可以方便地撤销之前对文件的修改操作。最简化的版本控制模型，就是大多数主流文本编辑器都有的撤销（Undo）功能。

## 主动提交：程序代码和普通文本的区别

 VCS 和文本编辑器的撤销功能比起来，有一个很重要的区别是：程序代码的修改的生命周期非常长。 VCS 保存修改历史，使用的是主动提交改动的机制。在写完一段完整的代码之后，使用 commit 命令把改动和对改动的描述信息提交，这样就能记录到版本历史当中了。

## 多人合作的同步需求：中央仓库

中央仓库作为代码的存储中心，所有人的改动都会上传到这里，所有人也都能看到和下载别人上传的改动，解决同步的需求。

版本控制、主动提交和中央仓库这三个元素，共同构成了版本控制系统（VCS）的核心。开发团队中的每个人都向中央仓库主动提交自己的改动和同步别人的改动，并在需要的时候查看和操作历史版本，这就是版本控制系统。

## 中央式版本控制系统工作模型

第一次加入团队时，把中央仓库的代码取下来；
写完的新功能提交到中央仓库；
同事提交到中央仓库的新代码，及时同步下来。

这就是中央式 VCS 最基本的工作模型。实际的开发工作并没有简单到这种程序，因为时常需要处理代码冲突、查看版本历史、回退代码版本等。另外，Git 属于分布式 VCS ，它的概念也比中央式VCS要复杂一些。

# 2 什么是分布式版本控制系统（DVCS）

## 区别和功能比较

分布式 VCS （Distributed VCS / DVCS）和中央式的区别在于，分布式 VCS 除了中央仓库之外，还有本地仓库：团队中每一个成员的机器上都有一份本地仓库，这个仓库里包含了所有的版本历史，或者换句话说，每个人在自己的机器上就可以提交代码、查看历史，而无需联网和中央仓库交互——当然，取而代之的，你需要和本地仓库交互。

中央式 VCS 的中央仓库有两个主要功能：保存版本历、同步团队代码。而在分布式 VCS 中，保存版本历史的工作转交到了每个团队成员的本地仓库中，中央仓库就只剩下了同步团队代码这一个主要任务。它的中央仓库依然也保存了历史版本，但这份历史版本更多的是作为团队间的同步中转站。工作模型和上一节讲的「中央式 VCS 的工作模型」很相似，只是把代码的提交和上传过程拆开了。

## 优点与缺点

优点：

1. 大多数的操作可以在本地进行，所以速度更快，而且由于无需联网，所以即使不在公司甚至没有在联网，你也可以提交代码、查看历史，从而极大地减小了开发者的网络条件和物理位置的限制（例如，你可以在飞机上提交代码、切换分支等等）；
2. 由于可以提交到本地，所以你可以分步提交代码，把代码提交做得更细，而不是一个提交包含很多代码，难以 review 也难以回溯。

缺点：

1. 由于每一个机器都有完整的本地仓库，所以初次获取项目（Git 术语：clone）的时候会比较耗时；
2. 由于每个机器都有完整的本地仓库，所以本地占用的存储比中央式 VCS 要高。

# 3 上手 1：新公司用 Git 管理代码，怎么快速上手？

# 4 上手 2：团队工作的基本工作模型

# 5 进阶 1：HEAD、master 与 branch

# 6 进阶 2：push 的本质

# 7 进阶 3：merge：合并 commits

# 8 进阶 4：Feature Branching：最流行的工作流

# 9 进阶 5：关于 add

# 10 进阶 6：看看我都改了什么

# 11 高级 1：不喜欢 merge 的分叉？用 rebase 吧

# 12 高级 2：刚刚提交的代码，发现写错了怎么办？

# 13 高级 3：写错的不是最新的提交，而是倒数第二个？

# 14 高级 4：比错还错，想直接丢弃刚写的提交？

# 15 高级 5：想丢弃的也不是最新的提交？

# 16 高级 6：代码已经 push 上去了才发现写错？

# 17 高级 7：reset 的本质——不止可以撤销提交

# 18 高级 8：checkout 的本质

# 19 高级 9：紧急情况：「立即给我打个包，现在马上！」

# 20 高级 10：branch 删过了才想起来有用？

# 21 额外说点：.gitignore——排除不想被管理的文件和目录

# 22 总结
