> HTML5与CSS3权威指南(第3版-下册)
> 版次：2015年9月第一次出版

[TOC]

# 第18章 CSS 3概述 

18.1 概要介绍

18.1.1 CSS 3是什么 

CSS 3 是CSS 技术的一个升级版本。

18.1.2 CSS 3的历史 

CSS 1 在1996年12月正式推出。

CSS 2 在1008年5月正式推出。

CSS 2.1 在2004年2月正式推出。

18.2 使用CSS 3能做什么 

18.2.1 模块与模块化结构 

在 CSS 3 中没有采用总体结构，而是采用了分工协作的模块化结构，这是为了避免产生浏览器对于某个模块支持不完全的情况。

18.2.2 一个简单的CSS 3示例 

# 第19章 选择器 

## 19.1 选择器概述 

选择器是 CSS 3 中一个重要的内容，使用它可以大幅度提高开发人员书写或修改样式表时的工作效率。

使用元素的 class 属性有两个缺点：第一，class 属性本身没有语义，它纯粹用来为 CSS 样式服务，属于多余属性；第二，使用 class 属性的话，并没有把样式与元素绑定起来，针对同一个 class 属性，文本框也可以使用，下拉框也可以使用，甚至按钮也可以使用，这样其实是非常混乱的，修改样式时也很不方便。所以在 CSS 3 中提倡使用选择器来将样式与元素直接绑定起来。

具体来说，使用选择器进行样式绑定时，采用类似E[foo$="val"]这种正则表达式的形式。在样式中，声明该样式应用于什么元素，该元素的某个属性的属性值必须是什么。另外，还可以在指定样式时使用“^”通配符等匹配符。使用通配符能大大提高样式表的书写效率。

## 19.2 属性选择器 

19.2.1 属性选择器概述 

在 HTML 中，通过各种各样的属性，我们可以给元素增加很多附加信息。在 CSS 2 中可以通过设定 class 属性并追加样式，利用声明属性与属性值的方法添加样式。

19.2.2 CSS 3中的属性选择器 

在 CSS 3 中，追加了三个属性选择器，分别为：分别为：[ att*= val ] 、[ att^= val ] 和 [ att$= val ] ，使得属性选择器有了通配符的概念。

> [ att*= val ] 属性选择器的含义是：如果元素用 att 表示的属性的属性值中包含用 val 指定的字符，则该元素使用这个样式。
>
> [ att^= val ]属性选择器的含义是：如果元素用 att 表示的属性的属性值的开头字符为用 val 指定的字符，则该元素使用这个样式。
>
> [ att$= val ] 属性选择器的含义是：如果元素用 att 表示的属性的属性值的结尾字符为用 val 指定的字符，则该元素使用这个样式。



19.2.3 灵活运用属性选择器 

如果能够灵活运用属性选择器，目前为止需要依靠 id 或 class 名才能实现的样式完全可以使用属性选择器来实现。

## 19.3 结构性伪类选择器

19.3.1 CSS中的伪类选择器及伪元素 

在 CSS 中可以使用类选择器把相同的元素定义成不同的样式。同时还有一种伪类选择器，这种伪类选择器与类选择器的区别是，类选择器可以随便起名，但是伪类选择器是 CSS 中已经定义好的选择器，不能随便起名。

- a:link选择器：修改从未被访问过的a标签样式。
- a:visited选择器：修改已经被访问过的a标签样式。
- a:hover选择器：修改鼠标悬停在a标签上的样式。
- a:active选择器：修改链接被长按时的样式。

伪元素选择器是指并不是针对真正的元素使用的选择器，而是针对 CSS 中已经定义好的伪元素使用的选择器。在 CSS 中，主要有如下四个伪元素选择器。

- "first-line" 伪元素用于向文本的首行设置特殊样式。 
- "first-letter" 伪元素用于向文本的首字母设置特殊样式 
- "before" 伪元素可以在元素的内容前面插入新内容。 
- "after" 伪元素可以在元素的内容之后插入新内容。 

19.3.2 选择器root、not、empty和target 

结构性伪类选择器的共同特征是允许开发者根据文档树种的结构来指定元素的样式。4个最基本的结构性伪类选择器分别是：root 选择器、not 选择器、empty 选择器与 target 选择器。

- root 选择器将样式绑定到页面的根元素中。根元素是指位于文档树中最顶层结构的元素，在 HTML 页面中就是指包含着整个页面的`“<html>”`部分。
- not 选择器。如果想对某个结构元素使用样式，但是想排除这个结构元素下面的子结构元素，让它不使用这个样式时，可以使用 not 选择器。
- 使用 empty 选择器来指定当元素中内容为空白时使用的样式。
- 使用 target 选择器来对页面中某个 target 元素（该元素的 ID 被当做页面中的超链接来使用）指定样式，该样式指在用户点击了页面中的超链接，并且跳转到 target 元素后起作用。

19.3.3 选择器first-child、last-child、nth-child和nth-last-child 

- :first-child选择某个父元素的第一个子元素；
- :last-child选择某个父元素的最后一个子元素；
- :nth-child()选择某个父元素的一个或多个特定的子元素；
- :nth-last-child()选择某个父元素的一个或多个特定的子元素，从这个元素的最后一个子元素开始算；

后两个伪类选择器除了对指定序号的子元素使用样式以外，nth-child 选择器与 nth-last-child 选择器还可以用来对某个父元素中所有第奇数个元素或第偶数个子元素使用样式。

19.3.4 选择器nth-of-type和nth-last-of-type 

nth-child 选择器在计算子元素是第奇数个元素还是第偶数个元素时，是连同父元素中的所有子元素一起计算的。换句话说，`“h2:nth-child(odd)”`这行代码的含义不是针对 div 元素中第奇数个 h2 子元素来使用，而是指当 div 元素中的第奇数个子元素如果是 h2 子元素时使用。当父元素是列表时，因为列表中只可能有列表项目一种子元素，所以不会出现问题，而当父元素是 div 时，因为 div 元素中包含多种子元素，所以出现了问题。

使用 nth-of-type 选择器与 nth-last-of-type 选择器来避免这类问题的发生。使用这两个选择器时，CSS 3 在计算子元素的奇偶顺序时，只会针对同类型的子元素进行计算。

19.3.5 循环使用样式 

在 nth-child 选择器，只需要在”nth-child(n)“语句处，把参数n改成可循环的an+b的形式就可以了，a表示每次循环中共包括几种样式，b表示指定的样式在循环中的位置。

19.3.6 only-child选择器 

:only-child选择器匹配属于父元素中唯一子元素的元素。 

使用“ nth- child（ 1）： nth- last- child（ 1）”也可以代替。

## 19.4 UI元素状态伪类选择器 

在 CSS 3 的选择器中，除了结构性伪类选择器外，还有一种 UI 元素状态伪类选择器。这些选择器的共同特征是：指定的样式只有当元素处于某种状态下时才起作用，在默认状态下不起作用。

19.4.1 伪类选择器E:hover、E:active和E:focus 

E:hover 伪类选择器被用来指定当鼠标指针移动到元素上时元素缩使用的样式。

E:focus 伪类选择器被用来指定元素被激活，鼠标在元素上按下还没有松开时使用的样式

E:focus 伪类选择器被用来指定元素获得光标焦点时使用的样式，主要在文本框控件获得焦点并进行文字输入时使用。

19.4.2 伪类选择器E:enabled与E:disabled 

E:enable 伪类选择器用来指定当元素处于可用状态时的样式。

E:disabled 伪类选择器用来指定当元素处于不可用状态时的样式。

当一个表单中的元素经常在可用状态与不可用状态之间进行切换时，通常会将这两种伪类选择器结合使用。

19.4.3 伪类选择器E:read-only与E:read-write 

E:read-only 伪类选择器用来指定当元素处于只读状态时的样式

E:read-write 伪类选择器用来指定当元素处于非只读状态时的样式

在 FreFox 浏览器中，需要写成“-moz-read-only”或“-moz-read-write”的样式。

19.4.4 伪类选择器E:checked、E:default和E:indeterminate 

E:checked 伪类选择器用来指定当表单中的 radio 单选框或 checkbox 复选框处于选取状态时的样式。

E:default 选择器用来指定当页面打开时默认处于选取状态的单选框或复选框控件的样式。需要注意的是，即使用户将该单选框或复选框控件的选取状态设定为非选取状态，这个选择器中指定的样式仍然有效。

E:indeterminate 伪类选择器用来指定当页面打开时，一组单选框中没有任何一个单选框被设定为选取状态时整租单选框的样式。如果用户选取了其中任何一个单选框，则该样式被取消指定。

19.4.5 伪类选择器E::selection 

E::selection 伪类选择器用来指定当元素处于选中状态时的样式。

19.4.6 伪类选择器E:invalid与E:valid 

E:invalid 伪类选择器用来指定，当元素内容不能通过 HTML5 通过使用元素的诸如 require、pattern 等属性缩指定的检查或元素内容不符合元素的规定格式时的样式。

E:valid 伪类选择器用来指定，当元素内容通过 HTML5 通过使用元素的诸如 require、pattern 等属性缩指定的检查或元素内容符合元素的规定格式时的样式。

19.4.7 伪类选择器E:required与E:optional 

E：required伪类选择器用来指定允许使用required属性，且已经指定了required属性的input元素、select元素以及textarea元素的样式。

E：optional伪类选择器用来指定允许使用required属性，且未指定required属性的input元素、select元素以及textarea元素的样式。

19.4.8 伪类选择器E:in-range与E:out-of-range 

E:in-range 伪类选择器用来指定当元素的有效值被限定在一段范围之内（通常通过 min 属性值与 max 属性值来限定），且实际输入值在该范围内时使用的样式。

E:out-of-range 伪类选择器用来指定当元素的有效值被限定在一段范围之内（通常通过 min 属性值与 max 属性值来限定），但实际输入值在该范围之外时使用的样式。

19.5 通用兄弟元素选择器 

通用兄弟选择器是用来，指定位于同一个父元素之中的某个元素之后的所有其他某个种类的兄弟元素所使用的样式。相邻兄弟元素选择器“+”，通用兄弟元素选择器“~”。

| 选择器            | 例子  | 例子描述                                   | CSS  |
| ----------------- | ----- | ------------------------------------------ | ---- |
| element+element   | div+p | 选择紧接在 <div> 元素之后的所有 <p> 元素。 | 2    |
| element1~element2 | p~ul  | 选择前面有 <p> 元素的每个 <ul> 元素。      | 3    |

# 第20章 使用选择器在页面中插入内容 

## 20.1 使用选择器来插入文字 

20.1.1 使用选择器来插入内容 
20.1.2 指定个别元素不进行插入 

## 20.2 插入图像文件 

20.2.1 在标题前插入图像文件 
20.2.2 插入图像文件的好处 
20.2.3 将alt属性的值作为图像的标题来显示 

## 20.3 使用content属性来插入项目编号 

20.3.1 在多个标题前加上连续编号 
20.3.2 在项目编号中追加文字 
20.3.3 指定编号的样式 
20.3.4 指定编号的种类 
20.3.5 编号嵌套 
20.3.6 中编号中嵌入大编号 
20.3.7 在字符串两边添加嵌套文字符号 

# 第21章 文字与字体相关样式 

21.1　给文字添加阴影——text-shadow属性 
21.1.1　text-shadow属性的使用方法 
21.1.2　位移距离 
21.1.3　阴影的模糊半径 
21.1.4　阴影的颜色 
21.1.5　指定多个阴影 
21.2　让文本自动换行——word-break属性 
21.2.1　依靠浏览器让文本自动换行 
21.2.2　指定自动换行的处理方法 
21.3　让长单词与URL地址自动换行——word-wrap属性 
21.4　使用服务器端字体——Web Font与@font-face属性 
21.4.1　在网页上显示服务器端字体 
21.4.2　定义斜体或粗体字体 
21.4.3　显示客户端本地的字体 
21.4.4　属性值的指定 
21.5　修改字体种类而保持字体尺寸不变——font-size-adjust属性 
21.5.1　字体不同导致文字大小的不同 
21.5.2　font-size-adjust属性的使用方法 
21.5.3　浏览器对于aspect值的计算方法 
21.5.4　font-size-adjust属性的使用示例 
21.6　使用rem单位定义字体大小 

# 第22章 盒相关样式 

22.1　盒的类型 
22.1.1　盒的基本类型 
22.1.2　inline-block类型 
22.1.3　inline-table类型 
22.1.4　list-item类型 
22.1.5　run-in类型与compact类型 
22.1.6　表格相关类型 
22.1.7　none类型 
22.1.8　各种浏览器对于各种盒类型的支持情况 
22.2　对于盒中容纳不下的内容的显示 
22.2.1　overflow属性 
22.2.2　overflow-x属性与overflow-y属性 
22.2.3　text-overflow属性 
22.3　对盒使用阴影 
22.3.1　box-shadow属性的使用方法 
22.3.2　将参数设定为0 
22.3.3　创建盒内阴影 
22.3.4　对盒内子元素使用阴影 
22.3.5　对第一个文字或第一行使用阴影 
22.3.6　对表格及单元格使用阴影 
22.4　指定针对元素的宽度与高度的计算方法 
22.4.1　box-sizing属性 
22.4.2　为什么要使用box-sizing属性 

# 第23章 背景与边框相关样式 

23.1　与背景相关的新增属性 
23.1.1　指定背景的显示范围——background-clip属性 
23.1.2　指定背景图像的绘制起点——background-origin属性 
23.1.3　指定背景图像的尺寸——background-size属性 
23.1.4　新增的用于平铺背景图像的选项——space与round 
23.2　在一个元素中显示多个背景图像 
23.3　使用渐变色背景 
23.3.1　绘制线性渐变 
23.3.2　绘制放射性渐变 
23.4　圆角边框的绘制 
23.4.1　border-radius属性 
23.4.2　在border-radius属性中指定两个半径 
23.4.3　不显示边框的时候 
23.4.4　修改边框种类的时候 
23.4.5　绘制四个角不同半径的圆角边框 
23.5　使用图像边框 
23.5.1　border-image属性 
23.5.2　border-image属性的最简单的使用方法 
23.5.3　使用border-image属性来指定边框宽度 
23.5.4　指定4条边中图像的显示方法 
23.5.5　使用背景图像 

# 第24章 CSS3中的变形处理 

在 CSS 3 中，可以利用 transform 功能实现文字或图像的旋转、缩放、倾斜、移动着4种类型的变形处理。

## 24.1 transform功能的基础知识 

24.1.1 如何使用transform功能 

在 CSS 3 中，通过 transform 属性来使用 transform 功能。deg 是 CSS 3 的“Values and Units“模块中定义的一个角度单位。下列代码使 div 元素顺时针旋转四十五度。

```css
div{ 
    width: 300px; 
    margin: 150px auto; 
    background-color: yellow; 
    text- align: center; 
    transform: rotate( 45deg) ; 
}
```



24.1.2 transform功能的分类 

旋转。使用 rotate 方法，在参数中加入角度值和单位，旋转方向为顺时针旋转。

缩放。使用 scale 方法来实现文字或图像的缩放处理，在参数中指定缩放倍率。例如 scale(0.5) 表示缩小一半。另外，如果拥有两个参数，可以分别指定元素的水平方向的放大倍率与垂直方向的放大倍率。

倾斜。使用 skew 方法实现文字或图像的倾斜处理，在参数中分别指定水平方向上的倾斜角度与垂直方向上的倾斜角度。另外，skew 方法中的两个参数可以修改成只使用一个参数，省略另一个参数——这种情况下指在水平方向上进行倾斜，垂直方向上不进行倾斜。

移动。使用 translate 方法来移动文字或图像，在参数中分别指定水平方向上的移动距离与垂直方向中的移动距离。只有一个参数的情况只在水平方向上移动。

## 24.2 对一个元素使用多种变形 

24.2.1 对一个元素使用多种变形的方法 

24.2.2 指定变形的基准点 

在使用 transform 方法进行文字或图像变形的时候，是以元素的中心点为基准点进行变形的，使用 transform-origin 属性，可以改变变形的基准点。

## 24.3 使用3D变形功能 

24.3.1 3D变形功能概述 

24.3.2 实现3D变形功能 

与 2D 变形一样，在 CSS 3 中同样可以实现元素在X轴、Y轴以及Z轴方向上的旋转、缩放、倾斜以及移动变形处理。

旋转。可以分别使用 rotateX 方法、rotateY 方法以及 rotateZ 方法使元素围绕X轴、Y轴及Z轴旋转，在参数中加入角度值，角度值后面跟表示角度单位的 deg 文字即可，旋转方向为顺时针旋转。可以将多个方法书写在一行样式代码中，以同时实现多个轴上的旋转处理。也可以将 2D 变形方法与 3D 变形方法同时书写在一行样式代码，以同时实现 2D 变形处理及 3D 变形处理。

缩放。可以分别使用 scaleX 方法、scaleY 方法及 scaleZ 方法使元素按X轴、Y轴及Z轴方向进行缩放，在参数中指定缩放频率。可以将多个方法书写在一行样式代码中，以同时实现多个轴上的缩放处理。也可以将多个变形方法同时书写在一行样式代码中，以同时实现多种变形处理。

倾斜。可以分别使用 skewX 方法及 skewY 方法使元素在X轴及Y轴上进行顺时针方向倾斜（请注意没有skewZ方法，因为倾斜是二维变形，不能在三维空间倾斜。元素可能会在X轴和Y轴倾斜，然后转化为三维，但它们不能在Z轴上倾斜），在参数中指定倾斜角度。

移动。可以分别使用 translateX 方法、translateY 方法及 translateZ 方法使元素在X轴、Y轴及Z轴方向上进行移动，在参数中加入移动距离。

24.4 变形矩阵 

矩阵函数 matrix() 函数与 matrix3d() 函数是理解 CSS 3 中变形技术的关键。每一种变形方法的背后都存在着一个对应的矩阵。CSS 变形是建立在线性代数与几何的基础上的。

24.4.1 矩阵概述 

矩阵是一个数学概念，它代表一组数字、符号或表达式的矩形阵列。

24.4.2 变形与坐标系统 

计算机世界中的坐标系统。每一个页面都是一个坐标系统，原点为页面的左上角，坐标位置为（0,0）。X轴方向从左向右，Y轴方向从上往下，Y轴决定阅读页面这与页面之间的距离。Z坐标值越大代表距离越近，Z坐标值越小代表距离越远。

当对一个对象应用变形时，首先建立本地坐标系统。在默认情况下，本地坐标系统中的原点在对象正中央。可以通过在使用 transform-origin 属性来调整坐标原点，在本地坐标系统中对任何坐标点进行的变形都是参考坐标原点进行的。

24.4.3 计算2D变形 

24.4.4 计算3D变形 

24.4.5 通过矩阵执行多重变形处理 



# 第25章 CSS3中的动画功能 

CSS3 的动画功能分为Transitions功能与Animation功能，这两种功能都可以通过改变 CSS 中的属性值来产生动画效果。到目前为止，Transitions 功能支持从一个属性值平滑过渡到另一个属性值，Animations 功能支持关键帧的指定来在页面上产生更复杂的动画效果。

## 25.1 Transitions功能 

25.1.1　Transitions功能的使用方法 

在 CSS3 中，Transitions 功能通过将元素的某个属性从一个属性值在指定的时间内平滑过渡到另一个属性值来实现动画功能。

transition-property	规定设置过渡效果的 CSS 属性的名称。
transition-duration	规定完成过渡效果需要多少秒或毫秒。
transition-timing-function	规定速度效果的速度曲线。
transition-delay	定义过渡效果何时开始。

```
transition: property duration timing-function delay;
```



25.1.2　使用Transitions功能同时平滑过渡多个属性值 

可以使用 Transitions 功能同时对多个属性值进行平滑过渡。另外，可以通过改变元素的位置属性值，实现变形处理的 Transform 属性值来让元素实现移动、旋转等动画效果。

## 25.2 Animations功能 

使用 Transitions 功能实现动画的缺点是只能指定属性的开始值与终点值，然后在这两个属性值之间实现平滑过渡，不能实现更为复杂的动画效果。在 CSS 3 中，除了使用 Transitions 功能外，还可以使用 Animations 功能来实现公话效果，它允许通过关键帧的指定来在页面上产生更复杂的动画效果。

25.2.1　Animations功能的使用方法 

使用 Animations 功能的时候，通过如下所示的方法来创建关键帧的集合。

```
@keyframes 关键帧集合名 { 创建关键帧的代码 }
```



创建好关键帧的集合后，在元素的样式中使用该关键帧的集合。

1. animation-name：指定关键帧集合的名称。

2. animation-duration：指定完成整个动画所花费的时间。

3. animation-timing-function：指定实现动画的方法。

4. animation-delay：用于指定延迟多少秒或多少毫秒后开始执行动画。

5. animation-iteration-count：指定动画的执行次数，可指定为 infinite 无限次。

6. animation-direction：用于指定动画的执行方向。可指定属性值包括： 

   normal：初始值（动画执行完毕后返回初始状态）。 
   alternate：交替更改动画的执行方向。 
   reverse：反方向执行动画。
   alternate-reverse：从反方向开始交替更改动画的执行方向。

25.2.2　实现多个属性值同时改变的动画 

如果要想实现让多个属性值同时变化的动画，只需在各关键帧中同时指定这些属性值就可以了。如果直接把样式代码应用到初始选择器，那么动画将在页面打开时进行播放。

25.2.3　实现动画的方法 

- linear，动画从头到尾的速度是相同的。
- ease，默认。动画以低速开始，然后加快，在结束前变慢。ease-in，动画以低速开始。
- ease-out，动画以低速结束。	
- ease-in-out，动画以低速开始和结束。
- cubic-bezier(n,n,n,n)，在 cubic-bezier 函数中自己的值。可能的值是从 0 到 1 的数值。

25.2.4　实现网页的淡入效果 

通过在开始帧与结束帧中改变页面的 opacity 属性的属性值来实现页面的淡入效果。

# 第26章 布局相关样式 

26.1　多栏布局 
26.1.1　使用float属性或position属性的缺点 
26.1.2　使用多栏布局方式 
26.2　盒布局 
26.2.1　使用float属性或position属性时的缺点 
26.2.2　使用盒布局 
26.2.3　盒布局与多栏布局的区别 
26.3　弹性盒布局 
26.3.1　对多个元素使用flex属性 
26.3.2　改变元素的显示顺序 
26.3.3　改变元素的排列方向 
26.3.4　元素宽度与高度的自适应 
26.3.5　使用弹性盒布局来消除空白 
26.3.6　对多个元素使用flex属性 
26.3.7　控制换行方式 
26.3.8　指定水平方向与垂直方向的对齐方式 
26.4　calc方法 
26.4.1　calc方法概述 
26.4.2　calc方法使用示例 

# 第27章 Media Queries相关样式 

27.1　根据浏览器的窗口大小来选择使用不同的样式 
27.2　在iPhone中的显示 
27.3　Media Queries的使用方法 

# 第28章 CSS 3的其他重要样式和属性 

28.1　颜色相关样式 
28.1.1　利用alpha通道来设定颜色 
28.1.2　alpha通道与opacity属性的区别 
28.1.3　指定颜色值为transparent 
28.2　用户界面相关样式 
28.2.1　轮廓相关样式 
28.2.2　resize属性 
28.3　使用initial属性值取消对元素的样式指定 
28.3.1　取消对元素的样式指定 
28.3.2　使用initial属性值并不等于取消样式设定的特例 
28.4　实现CSS 3中的滤镜特效 
28.4.1　滤镜特效概述 
28.4.2　实现滤镜特效 

# 第29章 综合实例 

29.1　实例1：使用HTML 5中新增结构元素来构建网页 
29.1.1　组织网页结构 
29.1.2　构建网页标题 
29.1.3　构建侧边栏 
29.1.4　构建主体内容 
29.1.5　构建版权信息 
29.2　实例2：使用HTML 5+CSS 3来构建Web应用程序 
29.2.1　HTML 5页面代码分析 
29.2.2　CSS 3样式代码分析 
29.2.3　脚本代码分析 